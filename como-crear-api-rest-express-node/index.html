<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.3bb658c59dc6a25c2fa4.css">@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap);@import url(https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap);
/*! Tania Rascia's website style. Written with plain CSS in one file. Why not? */:root{--font-color:#495057;--heading-color:#343a40;--background:#fff;--dark-font-color:#1b1d25;--medium-font-color:#60656c;--light-font-color:#787f87;--light-background:#f6f8fb;--lighter-background:#e6e8eb;--border:#d6d9de;--link-color:#eb374b;--link-color-darker:#c21327;--navbar-color:#fff;--blockquote:#edf2ff;--transparent-text:rgba(0,0,0,0.7);--transparent-bg:rgba(0,0,0,0.15)}*,:after,:before{box-sizing:border-box}html{font-family:Roboto Mono,-apple-system,BlinkMacSystemFont,Helvetica Neue,Roboto,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;color:var(--font-color);font-weight:400;font-size:1rem;line-height:1.5}body{background:var(--background);margin:0;padding:0}article{min-width:0}section{margin:2rem 0}section:first-of-type,section>h2{margin-top:0}section>h2{display:flex;align-items:center;font-size:1.8rem;margin-bottom:2rem}.section-button{font-weight:500;background:var(--light-background);color:var(--dark-font-color);padding:.4rem .6rem;font-size:.8rem;border-radius:3rem;border-bottom:0;white-space:nowrap;line-height:1;margin-left:2rem;margin-top:.5rem}.section-button:hover{background:#868e96;color:#fff}@media screen and (min-width:800px){section{margin:3.5rem 0}section>h2{font-size:2rem;margin:0 0 1rem}}.container{max-width:1100px;padding:0 1.5rem;margin-left:auto;margin-right:auto}.container.page p{max-width:600px}@media screen and (min-width:800px){.container{padding:0 2rem}}img{display:inline-block;max-width:100%;height:auto}blockquote,dl,ol,p,table,ul{font-size:1.05rem;margin:0 0 1.5rem}ul{padding:0 1rem}@media screen and (min-width:800px){blockquote,dl,ol,p,table,ul{font-size:1.05rem}ul{padding:0 2rem}}ul li p{margin:0}ul li ul{padding-left:1rem;margin:0}ul li ul li{margin:0}ol li ol{margin-bottom:0}.task-list-item [type=checkbox]{margin-right:.5rem}blockquote{margin:2rem 0;padding:1rem;background:var(--blockquote);border-radius:.35rem;font-weight:400}blockquote p{margin:0}blockquote a{padding:1px 4px}blockquote :not(pre)>code[class*=language-]{background:rgba(0,0,0,.1)!important}blockquote a:hover{border-radius:.35rem;border-bottom:1px solid var(--link-color-darker);background:var(--link-color-darker);color:#fff}blockquote.quotation{margin:2rem 0;padding:0 1.5rem;background:transparent;border-radius:0;border:none;border-left:12px solid var(--border)}blockquote.quotation p{font-family:Georgia,serif;line-height:1.6;color:var(--medium-font-color);font-size:1.1rem;margin:0 0 2rem}blockquote cite{display:block;padding:1rem}blockquote cite p{font-size:1.05rem}blockquote cite{font-size:1.3rem}@media screen and (min-width:800px){blockquote.quotation{margin:2.5rem 0;overflow:auto;border-width:16px}blockquote.quotation cite{float:right}blockquote.quotation p{font-size:1.3rem}}h1,h2,h3,h4,h5{margin:0 0 1.5rem;font-weight:700;line-height:1.2;color:var(--heading-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1:not(:first-child),h2:not(:first-child),h3:not(:first-child),h4:not(:first-child){margin-top:3rem}h1{font-size:2.5rem;line-height:1.1}h2{font-size:1.75rem;padding-bottom:.5rem;border-bottom:1px solid var(--border)}h2 code{font-size:1.75rem!important}h3{font-size:1.5rem;color:var(--font-color);font-weight:600;margin-bottom:1rem}h3 code{font-size:1.4rem!important}h4{font-size:1.3rem;color:var(--font-color);font-weight:500;border-bottom:1px solid var(--border);padding-bottom:.25rem}h4,h5{margin-bottom:1rem}h5{font-size:1.2rem}@media screen and (min-width:800px){h1{font-size:3rem}h2{font-size:1.8rem}h2 code{font-size:1.8rem!important}h3{font-size:1.6rem;color:var(--font-color);font-weight:600}h3 code{font-size:1.6rem!important}}.aside-content{margin-top:1rem;border-radius:.35rem}aside{min-width:260px}aside a,aside p,aside ul{font-size:.95rem;margin-bottom:0}aside ul{padding-left:1rem}aside h3{margin-top:0;margin-bottom:1rem;padding-bottom:.25rem;font-size:1.1rem;color:var(--dark-font-color);border-bottom:1px solid var(--border)}aside section{margin:1.5rem 0;background:var(--light-background);padding:1.5rem;border-radius:.35rem}.aside-content section:last-child{margin-bottom:0}@media print{.aside-content,aside{display:none}}.avatar{display:block;border-radius:50%;max-width:180px;margin:0 auto 1rem}a.link{display:block;padding:.25rem 0;margin:.25rem 0;border-radius:.35rem;font-weight:600;color:var(--dark-font-color)}a.link,a.link:hover{background:transparent}a.link:hover{color:var(--link-color)}.lead{padding:3rem 0;margin:0;background:var(--background)}.lead .container{display:flex;flex-direction:column}.lead h1{font-weight:600;font-size:1.8rem;margin-bottom:2rem;line-height:1.2}.lead p{color:var(--light-font-color);font-size:1.1rem;font-weight:400;margin-bottom:2.5rem;line-height:1.6}.lead p:last-child{margin-bottom:0}.copy{max-width:600px}.lead img{display:block;border-radius:16px;height:150px;width:150px;margin-bottom:2rem}.lead a{color:var(--link-color);background:transparent;font-weight:700}.lead a:hover{background:linear-gradient(transparent 70%,#f9c2c8 0)}button{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}button:focus{outline:none}.controls>*{margin-right:4px}.button{border:none;font-weight:500;background:var(--light-background);color:var(--dark-font-color);padding:.4rem .6rem;font-size:.8rem;border-radius:3rem;border-bottom:0;white-space:nowrap;line-height:1}.button:hover{background:#868e96;color:#fff}.button svg{margin-right:4px}.lead .image{order:1}.lead .copy{order:2}.lead b{color:#fff}@media screen and (min-width:800px){.lead{padding:4.5rem 0}.lead .container{flex-direction:row;justify-content:space-between;align-items:center}.lead h1{font-size:2.6rem;line-height:1.1}.lead p{font-size:1.3rem}.lead img{height:auto;width:auto;max-width:200px;margin-bottom:0;margin-left:2.5rem}.lead .image{order:2}.lead .copy{order:1}}@media screen and (min-width:1000px){.lead{align-items:center}.lead img{max-width:350px}}p.subtitle{color:var(--medium-font-color);font-size:1.3rem;font-weight:300}@media screen and (min-width:800px){p.subtitle{font-size:1.5rem}}a{background:linear-gradient(transparent 70%,#f9c2c8 0);text-decoration:none;font-weight:700}a,a:hover{color:var(--dark-font-color)}a:hover{background:linear-gradient(transparent 70%,#e0afb5 0)}.anchor.before{background:none}a code[class*=language-]{color:var(--link-color)!important}a code[class*=language-]:hover{background:var(--link-color)!important;color:#fff!important}main{margin-top:3.5rem}@media screen and (min-width:800px){main{margin-top:4.5rem}}.emoji{margin:0 .4rem 0 .1rem}.navbar{width:100%;padding:.5rem;position:fixed;top:0;left:0;background:var(--navbar-color);box-shadow:0 3px 13px rgba(100,110,140,.1),0 2px 4px rgba(100,110,140,.15);z-index:2}.navbar .flex{justify-content:space-between}.footer a,.navbar a{background:transparent;border-radius:.35rem;padding:.25rem;margin:0 .05rem;color:#000;font-weight:400;font-size:.9rem;border:1px solid transparent}.navbar a:hover,.navbar a[aria-current=page]{background:rgba(0,0,0,.2);color:#fff}.navbar button{font-size:1rem;margin-right:-1rem}.navbar a .emoji{display:none}.footer a{color:var(--transparent-text)}.footer a:hover{background:var(--transparent-bg)}.navbar a:first-of-type{margin-left:-1rem}.navbar a.brand{font-size:1.05rem;font-weight:500;color:#000;white-space:nowrap;background:transparent;border:none;display:flex;align-items:center;line-height:1}.navbar a.brand:hover{background:rgba(0,0,0,.2)}.navbar a.brand .emoji{display:inline-block!important}.navbar a.brand .name{display:none}@media screen and (min-width:500px){.navbar a{font-size:.95rem;padding:.5rem}.navbar a.brand .name{display:inline}}@media screen and (min-width:800px){.emoji{margin:0 .5rem 0 .1rem}.navbar{padding:.5rem 0}.navbar .flex{justify-content:space-between}.footer a,.navbar a{padding:.75rem 1.25rem;margin:0 .25rem;font-size:1.1rem}.navbar a.brand{font-size:1.3rem;margin-right:3rem;border:none}.navbar a:first-of-type{margin-left:-1.5rem}}@media print{.navbar{display:none}}.footer{padding:2rem 0}.footer>.flex{flex-direction:column}.footer-links,.footer>.flex{align-items:center;justify-content:center}.footer-links{display:flex;flex-wrap:wrap}.flex nav{padding:1rem 0}.footer a.img{display:flex;align-items:center;padding:0;margin:0 .75rem;background:none}.footer img{height:30px;width:30px}@media screen and (min-width:800px){.footer>.flex{align-items:flex-start;margin-left:-1.5rem;margin-right:-1.5rem}.footer a.img{padding:0 .5rem;margin:0 1rem}}@media print{.footer{display:none}}table{display:block;border-collapse:separate;border-spacing:0;width:100%;max-width:100%;overflow-x:auto;border:1px solid var(--border);border-radius:.35rem}tbody,thead{white-space:nowrap}th{border-bottom:2px solid var(--border)}tfoot th{border-top:1px solid var(--light-background)}td{border-bottom:1px solid var(--light-background)}td,th{text-align:left;padding:.75rem!important;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;word-break:break-word}tbody tr:nth-child(2n){background-color:var(--light-background)}@media screen and (min-width:800px){table{display:table}}.flex{display:flex;align-items:center}.flex-row{display:flex;flex-direction:column}@media screen and (min-width:800px){.flex-row{flex-direction:row}}.flex-col{flex:1 1}.flex-two-thirds{flex:2 1}.justify-center{justify-content:center}.new-post{display:inline-block;background:#d3f9d8;color:#111;padding:.5rem;border-radius:.3rem;font-size:.9rem;margin-right:1rem;margin-bottom:1rem}@media screen and (min-width:800px){.new-post{margin-bottom:0}}.grid{display:grid;align-items:stretch}.grid.projects{grid-template-columns:40px auto}.row .cell.description{grid-column:1/span 2;margin-bottom:2rem;line-height:1.3;font-size:1.1rem}@media screen and (min-width:800px){.grid{margin-left:-1rem;margin-right:-1rem}.grid.projects{grid-template-columns:50px 1fr 4fr}.row .cell.description{grid-column:auto;margin-bottom:0}.grid.posts{grid-template-columns:1fr 1fr;grid-gap:.25rem}.grid.lists{grid-template-columns:2fr 4fr}.grid.posts.with-tags{grid-template-columns:4fr 2fr}}.row{display:contents;border-bottom:1px solid var(--border)}a.cell{background:transparent}.lists .row,.posts .row{display:block;margin-bottom:1rem;padding-bottom:1rem}.lists a{background:transparent}.row .cell{font-weight:600;color:var(--dark-font-color);font-size:1.1rem;line-height:1.2;padding:.25rem 0}.row .cell.simple{border-bottom:none}.row .cell time{font-size:.75rem;margin-bottom:.25rem}@media screen and (min-width:800px){.lists .row,.posts .row{margin-bottom:2rem}.row .cell{display:flex;align-items:center;font-size:1.15rem;padding:.8rem 0}.row.narrow .cell{padding:.4rem 0}.row .cell time{font-size:.8rem}.row .cell.simple{padding:.5rem 0}.lists .row,.posts .row{display:contents}.row:hover>*{background:var(--light-background);border-color:var(--border)}.row .cell.simple:first-child,.row .cell:first-child{padding-left:1rem;border-top-left-radius:.35rem;border-bottom-left-radius:.35rem}.row .cell.simple:last-child,.row .cell:last-child{padding-right:1rem;padding-left:1rem;border-top-right-radius:.35rem;border-bottom-right-radius:.35rem}}.row .cell.light{font-weight:400;color:var(--light-font-color)}.grid.guide{display:block;margin-top:2rem;margin-left:0;margin-right:0}.grid.guide a{display:block;background:var(--light-background);transition:all .2s ease;padding:1.5rem;border-radius:.5rem;margin-bottom:1rem}.grid.guide img{border-radius:.35rem}.grid.guide .gatsby-image-wrapper{height:50px!important;width:50px!important;margin-right:1.5rem}.grid.guide a:hover{transform:translate3D(0,-1px,0);background:var(--lighter-background)}.grid.guide h2{font-size:1.1rem;font-weight:600;padding-bottom:.5rem;margin:.5rem 0 1rem;border-bottom:none}.grid.guide p{font-weight:400;margin:0;line-height:1.5;color:var(--light-font-color)}@media screen and (min-width:600px){.grid.guide{display:grid;grid-auto-rows:1fr;grid-gap:1.5rem;grid-template-columns:repeat(2,minmax(0,1fr))}.grid.guide a{flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:1.5rem;margin:0}.grid.guide .gatsby-image-wrapper{margin-right:0}}@media screen and (min-width:800px){.grid.guide{grid-template-columns:repeat(3,minmax(0,1fr))}.grid.guide a{flex-direction:column}.grid.guide h2{margin-top:.5rem;font-size:1.3rem}.grid.guide .gatsby-image-wrapper{height:75px!important;width:75px!important;margin-right:0}}.grid.post{grid-gap:1rem;margin-left:0;margin-right:0}header{padding:1rem 0}header h1{font-size:2rem;font-weight:600;margin-top:1.5rem}header h1,header u{display:inline-block}header u{text-decoration:none;padding:.4rem 0}.article-header{padding:3rem 0}.article-header .container{padding-left:0;padding-right:0}.article-header h1{font-weight:700;font-size:1.6rem;margin:0}.article-header .description{font-size:1.5rem;color:var(--light-font-color);font-weight:300;margin-top:2rem;margin-bottom:0}@media screen and (min-width:800px){header h1{font-size:3rem;margin-top:2rem}header u{background:linear-gradient(transparent 85%,#e0afb5 0)}.article-header h1{font-size:2.5rem}}@media screen and (min-width:1100px){.grid.post{margin-top:5rem;grid-gap:5rem;grid-template-columns:3fr 1fr}.article-header h1{font-size:2.5rem}}.search-form{display:flex}[type=search]{display:block;padding:.8rem 1rem;border:1px solid var(--border);width:100%;max-width:400px;border-radius:.35rem;font-size:1rem;-webkit-appearance:none;margin-left:auto;margin-right:auto;margin-bottom:3rem}.search-form [type=search]{border-right:none;border-top-right-radius:0;border-bottom-right-radius:0}::-webkit-input-placeholder{color:var(--light-font-color)}:-moz-placeholder,:-ms-input-placeholder,::-moz-placeholder,::-webkit-input-placeholder,::placeholder{color:var(--light-font-color)}.suggested{flex-direction:column;align-items:stretch;margin-left:-1rem;margin-right:-1rem;padding:0}.suggested span{font-weight:400;display:block;font-size:.9rem;color:var(--transparent-text)}.suggested a{background:none;margin:1rem;border-bottom:none;transition:all .2s ease;padding:1.5rem;border-radius:.35rem;background:var(--light-background)}.suggested a:hover{transform:translate3D(0,-1px,0);background:var(--lighter-background)}@media screen and (min-width:800px){.suggested{flex-direction:row}.suggested a{flex-grow:0;flex-shrink:0;flex-basis:calc(50% - 2rem)}.suggested a:first-of-type{text-align:right}}.small{max-width:600px}.medium{max-width:800px}time{display:block}.meta,time{color:var(--light-font-color);font-size:.9rem;white-space:nowrap;font-weight:400}.meta{color:var(--medium-font-color);font-size:1rem}.count{font-weight:700;color:var(--link-color)}.tags{display:flex!important;flex-wrap:wrap;align-items:center;margin-left:-.5rem;margin-right:-.5rem}.tags>a{display:block;font-weight:500;background:transparent;margin:.2rem;padding:.4rem .6rem;font-size:.8rem;border-bottom:0;white-space:nowrap;line-height:1}mark{background:#ffec99}.text-center{text-align:center}.utterances{margin-left:-4px;margin-right:-4px}kbd{background-color:#f7f7f7;border:2px solid rgba(0,0,0,.3);border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 2px #fff;color:#333;display:inline-block;font-family:Helvetica Neue,Inter,-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif;line-height:1.4;margin:0 .1em;padding:.1em .6em;text-shadow:0 1px 0 #fff;font-size:14px}#dark-mode-button{display:flex;background:transparent;border:none;padding:.2rem .7rem .2rem .5rem;border-radius:.35rem;box-sizing:content-box;cursor:pointer;font-size:1.1rem}#dark-mode-button:hover{background:var(--transparent-bg)}@media screen and (min-width:800px){#dark-mode-button{padding:.75rem}}#comments{margin-top:3rem}#comments h2{margin:0}@media print{#comments,.comments{display:none}}::selection{background:#f7394f;color:#fff}:root{--code-font-family:Menlo,"Roboto Mono",Courier New,monospace;--code-font-color:#b3b9c5;--code-background-color:#353535;--string:#92d192;--variable:#f2777a;--property:#abb2bf;--number:#fca369;--operator:#ac8d58;--punctuation:#d5d8df;--comment:#848991;--function:#62cfcf;--keyword:#ffeead;--attribute:#ffd479;--class:#e1a6f2;--tag:#6ab0f3;--error:#f2777a}code[class*=language-],pre[class*=language-]{-webkit-font-smoothing:subpixel-antialiased;color:var(--code-font-color);font-family:var(--code-font-family);font-size:.9rem;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;font-weight:400;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]>a,code[class*=language-]>a:hover,pre[class*=language-]>a,pre[class*=language-]>a:hover{background:transparent;color:var(--code-font-color);cursor:text;pointer-events:none}pre[class*=language-]{padding:1.5rem;margin:.6rem -1.5rem 2rem;overflow:auto;box-shadow:0 0 1px rgba(0,0,0,.1),0 0 1px rgba(0,0,0,.06),0 2px 2px rgba(0,0,0,.06),0 4px 4px rgba(0,0,0,.06),0 8px 8px rgba(0,0,0,.06),0 16px 16px rgba(0,0,0,.06)}@media screen and (min-width:800px){code[class*=language-],pre[class*=language-]{font-size:.9rem}pre[class*=language-]{padding:1.5rem;margin-left:auto;margin-right:auto;border-radius:.35rem}}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:var(--code-background-color)}:not(pre)>code[class*=language-]{padding:.1rem .3rem;border-radius:.35rem}code.language-text,pre.language-text{background:#dcdee0!important;color:var(--dark-font-color)!important;box-shadow:none}code.language-shell:before{content:"$ ";color:var(--comment)}pre.language-terminal{position:relative;background:#fff;color:#595c62;padding-top:3rem;margin:2rem 0;border-radius:.35rem;border:1px solid #c7c9ca;box-shadow:0 .5rem 1rem rgba(51,51,51,.2),0 .5rem 2rem rgba(51,51,51,.2)}code.language-terminal{color:#595c62}pre.language-terminal:before{content:"\2022   \2022   \2022";position:absolute;top:0;left:0;background:linear-gradient(180deg,#eaeaea,#d2d2d2);color:#b9bcbd;width:100%;font-size:2.5rem;margin:0;line-height:0;padding:15px 0 12px;text-indent:6px;letter-spacing:-18px;border-bottom:1px solid #a6a9aa}pre.language-terminal:after{content:"Output";line-height:1;font-family:Myriad Pro,sans-serif;text-shadow:0 1px 0 hsla(0,0%,100%,.5);font-size:.9rem;position:absolute;top:6px;right:.5rem}.gatsby-highlight-code-line{background-color:#191919;display:block;margin-right:-1rem;margin-left:-1rem;padding-right:1rem;padding-left:.75rem;border-left:.25rem solid #748ffc}.token.cdata,.token.comment,.token.doctype,.token.important,.token.prolog{color:var(--comment)}.token.punctuation{color:var(--punctuation)}.token.namespace{opacity:.7}.token.property{color:var(--property)}.token.constant,.token.deleted,.token.symbol,.token.tag{color:var(--tag)}.token.number{color:var(--number)}.token.builtin,.token.char,.token.inserted,.token.url{color:var(--code-font-color)}.token.attr-name,.token.selector{color:var(--attribute)}.token.attr-value,.token.string{color:var(--string)}.token.operator{color:var(--operator)}.token.atrule,.token.keyword{color:var(--keyword)}.token.function{color:var(--function)}.language-css,.token.boolean,.token.class-name{color:var(--class)!important}.token.regex{color:var(--keyword)}.token.variable{color:var(--variable)}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.filename{font-size:.9rem;margin-bottom:-.8rem;padding:.3rem 1.5rem;line-height:1;font-family:Myriad Pro,sans-serif;background:linear-gradient(180deg,#eaeaea,#d2d2d2);border:1px solid #b9bcbd;color:#4d494d;z-index:2;margin-left:-1.5rem;margin-right:-1.5rem;text-shadow:0 1px 0 hsla(0,0%,100%,.5);box-shadow:inset 0 1px 0 hsla(0,0%,100%,.5),0 1px 0 #515151;text-align:center}@media screen and (min-width:800px){.filename{padding:.3rem 1rem .5rem;border-top-left-radius:.3rem;border-top-right-radius:.3rem;margin-left:auto;margin-right:auto}}code::selection,pre::selection{text-shadow:none;color:inherit;background:hsla(0,0%,58.8%,.3)!important}code[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;color:inherit;background:hsla(0,0%,58.8%,.3)!important}</style><meta name="generator" content="Gatsby 2.24.57"/><title data-react-helmet="true">C√≥mo crear un API REST con Express.js y Node.js | Claudia Valdivieso</title><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="/static/favicon-c0495cedcf86efc44cf53d77c920070c.png"/><meta data-react-helmet="true" name="description" content="Este tutorial es la parte 3 de 3 en esta serie.
Parte 1: Configuraci√≥n m√≠nima de Node.js con Babel
Parte 2: ¬øC√≥mo configurar Express.js en‚Ä¶"/><meta data-react-helmet="true" name="image" content="./public/2ca83622c883aa6a77bcde4643f9d6a8.png"/><meta data-react-helmet="true" property="og:url" content="https://lavaldi.com/como-crear-api-rest-express-node/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="C√≥mo crear un API REST con Express.js y Node.js"/><meta data-react-helmet="true" property="og:description" content="Este tutorial es la parte 3 de 3 en esta serie.
Parte 1: Configuraci√≥n m√≠nima de Node.js con Babel
Parte 2: ¬øC√≥mo configurar Express.js en‚Ä¶"/><meta data-react-helmet="true" property="og:image" content="./public/2ca83622c883aa6a77bcde4643f9d6a8.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="lavaldi_"/><meta data-react-helmet="true" name="twitter:title" content="C√≥mo crear un API REST con Express.js y Node.js"/><meta data-react-helmet="true" name="twitter:description" content="Este tutorial es la parte 3 de 3 en esta serie.
Parte 1: Configuraci√≥n m√≠nima de Node.js con Babel
Parte 2: ¬øC√≥mo configurar Express.js en‚Ä¶"/><meta data-react-helmet="true" name="twitter:image" content="./public/2ca83622c883aa6a77bcde4643f9d6a8.png"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://lavaldi.com","name":"C√≥mo crear un API REST con Express.js y Node.js","alternateName":"C√≥mo crear un API REST con Express.js y Node.js"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://lavaldi.com/como-crear-api-rest-express-node/","name":"C√≥mo crear un API REST con Express.js y Node.js","image":"./public/2ca83622c883aa6a77bcde4643f9d6a8.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://lavaldi.com","name":"C√≥mo crear un API REST con Express.js y Node.js","alternateName":"C√≥mo crear un API REST con Express.js y Node.js","headline":"C√≥mo crear un API REST con Express.js y Node.js","image":{"@type":"ImageObject","url":"./public/2ca83622c883aa6a77bcde4643f9d6a8.png"},"description":"Este tutorial es la parte 3 de 3 en esta serie.\nParte 1: Configuraci√≥n m√≠nima de Node.js con Babel\nParte 2: ¬øC√≥mo configurar Express.js en‚Ä¶"}]</script><link rel="icon" href="/favicon-32x32.png?v=cc3c67583be55729f545c487fe97c776" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#eb374b"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cc3c67583be55729f545c487fe97c776"/><link rel="alternate" type="application/rss+xml" title="Claudia Valdivieso | RSS Feed" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 30)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://lavaldi.com/como-crear-api-rest-express-node/" data-baseprotocol="https:" data-basehost="lavaldi.com"/><link as="script" rel="preload" href="/webpack-runtime-e6b619f2a5cdb26635b7.js"/><link as="script" rel="preload" href="/framework-376edee25eb5f5cd8260.js"/><link as="script" rel="preload" href="/app-baf706b2ada598d8c037.js"/><link as="script" rel="preload" href="/styles-c2fe8482057191dca484.js"/><link as="script" rel="preload" href="/commons-a34cae212a974f2cf94b.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-55788cc5a7679ffc507c.js"/><link as="fetch" rel="preload" href="/page-data/como-crear-api-rest-express-node/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="navbar"><div class="container"><div class="flex"><div><a class="brand" href="/"><span class="emoji"><img src="/static/lavaldi-icon-cc3c67583be55729f545c487fe97c776.png" height="30" width="30" alt="La Valdi"/></span> <span class="name">Claudia Valdivieso</span></a></div><div class="flex"><a href="/me">About</a><a href="/code">Code</a><a href="/jesus-freak">Jesus Freak</a><button id="dark-mode-button">üåô</button></div></div></div></nav><main><div class="container medium"><article><header class="article-header"><div class="container"><h1>C√≥mo crear un API REST con Express.js y Node.js</h1><time>February 09, 2019</time><div class="cell tags"><a style="color:#1c7ed6" href="/tags/node">#<!-- -->node</a><a style="color:#f03e3e" href="/tags/babel">#<!-- -->babel</a><a style="color:#37b24d" href="/tags/express">#<!-- -->express</a></div><div class="flex controls"><button class="flex button"><svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><g fill="none"><path d="M13.828 10.172a4 4 0 0 0-5.656 0l-4 4a4 4 0 1 0 5.656 5.656l1.102-1.101m-.758-4.899a4 4 0 0 0 5.656 0l4-4a4 4 0 0 0-5.656-5.656l-1.1 1.1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg>Copy link to clipboard</button><a href="https://twitter.com/intent/tweet/?text=C%C3%B3mo%20crear%20un%20API%20REST%20con%20Express.js%20y%20Node.js%2C%20post%20by%20%40lavaldi&amp;url=https://lavaldi.com/como-crear-api-rest-express-node" class="flex button" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="-2 -4 24 24"><g fill="currentColor"><path d="M20 1.907a8.292 8.292 0 0 1-2.356.637A4.07 4.07 0 0 0 19.448.31a8.349 8.349 0 0 1-2.607.98A4.12 4.12 0 0 0 13.846.015c-2.266 0-4.103 1.81-4.103 4.04 0 .316.036.625.106.92A11.708 11.708 0 0 1 1.393.754a3.964 3.964 0 0 0-.554 2.03 4.02 4.02 0 0 0 1.824 3.363A4.151 4.151 0 0 1 .805 5.64v.05c0 1.958 1.415 3.591 3.29 3.963a4.216 4.216 0 0 1-1.08.141c-.265 0-.522-.025-.773-.075a4.098 4.098 0 0 0 3.832 2.807 8.312 8.312 0 0 1-5.095 1.727c-.332 0-.658-.02-.979-.056a11.727 11.727 0 0 0 6.289 1.818c7.547 0 11.673-6.157 11.673-11.496l-.014-.523A8.126 8.126 0 0 0 20 1.907z"></path></g></svg>Tweet</a></div></div></header><div><blockquote>
<p>Este tutorial es la parte 3 de 3 en esta serie.<br>
Parte 1: <a href="/node-con-babel">Configuraci√≥n m√≠nima de Node.js con Babel</a><br>
Parte 2: <a href="/configurar-express-en-node">¬øC√≥mo configurar Express.js en Node.js?</a></p>
</blockquote>
<p>Una aplicaci√≥n Express se usa con m√°s frecuencia como una aplicaci√≥n backend en una arquitectura cliente-servidor, mientras que el cliente podr√≠a escribirse en React.js u otra soluci√≥n de interfaz popular, el servidor podr√≠a escribirse en Express. Ambas entidades dan como resultado una arquitectura cliente-servidor (relaci√≥n frontend y backend) mientras que el backend ser√≠a necesario para la l√≥gica de negocios (A) que no deber√≠a ser expuesta como c√≥digo fuente a la aplicaci√≥n frontend; de lo contrario, estar√≠a accesible en el navegador, o para (B) establecer conexiones a fuentes de datos de terceros (por ejemplo, bases de datos).</p>
<p>Sin embargo, no confunda la aplicaci√≥n cliente siempre con el frontend y la aplicaci√≥n del servidor siempre con el backend aqu√≠. Estos t√©rminos no pueden ser intercambiados tan f√°cilmente. Mientras que una aplicaci√≥n de interfaz de usuario es generalmente algo que se ve en el navegador, un sistema de fondo generalmente ejecuta una l√≥gica de negocios que no deber√≠a estar expuesta en un navegador y, a menudo, tambi√©n se conecta a una base de datos.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span>Frontend -<span class="token operator">></span> Backend -<span class="token operator">></span> Database</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Pero, en contraste, los t√©rminos cliente y servidor son una cuesti√≥n de perspectiva. Una aplicaci√≥n backend (Backend 1) que consume otra aplicaci√≥n backend (Backend 2) se convierte repentinamente en una aplicaci√≥n cliente para la √∫ltima aplicaci√≥n de servidor (Backend 2). Sin embargo, la misma aplicaci√≥n backend (Backend 1) sigue siendo el servidor para otra aplicaci√≥n cliente que es la aplicaci√≥n frontend (Frontend).</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">Frontend <span class="token operator">-</span><span class="token operator">></span> Backend <span class="token number">1</span> <span class="token operator">-</span><span class="token operator">></span> Backend <span class="token number">2</span> <span class="token operator">-</span><span class="token operator">></span> Database

<span class="token comment">// Frontend: Cliente del Backend 1</span>
<span class="token comment">// Backend 1: Servidor para Frontend, tambi√©n Cliente del Backend 2</span>
<span class="token comment">// Backend 2: Servidor para Backend 1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Si deseas responder a la pregunta del cliente-servidor si alguien te pregunta qu√© rol desempe√±a la entidad en una arquitectura cliente-servidor, siempre preg√∫ntate a ¬øqui√©n (servidor) le est√° sirviendo a qui√©n (cliente) y qui√©n (cliente) consume las funcionalidades de qui√©n (backend)?</p>
<p>Esa es la teor√≠a detr√°s de las arquitecturas cliente-servidor y c√≥mo relacionarse con ellas. Volvamos a ser m√°s pr√°cticos. ¬øC√≥mo se comunican entre s√≠ las aplicaciones cliente y servidor? A lo largo de los a√±os, existieron algunas interfaces de comunicaci√≥n (<a href="https://en.wikipedia.org/wiki/Application_programming_interface">APIs</a>) populares entre ambas entidades. Sin embargo, el m√°s popular se llama <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> definida en 2000 por Roy Fielding. Es una arquitectura que aprovecha el <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">protocolo HTTP</a> para permitir la comunicaci√≥n entre un cliente y una aplicaci√≥n de servidor. Una aplicaci√≥n de servidor que ofrece una API REST tambi√©n se denomina servidor RESTful. Los servidores que no siguen la arquitectura REST en un 100% se denominan RESTish en lugar de RESTful. A continuaci√≥n, vamos a implementar dicha API REST para nuestra aplicaci√≥n de servidor Express, pero primero vamos a conocer las herramientas que nos permiten interactuar con una API REST.</p>
<h2 id="curl-para-api-rest" style="position:relative;"><a href="#curl-para-api-rest" aria-label="curl para api rest permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cURL para API REST</h2>
<p>Si no has o√≠do hablar de cURL, esta secci√≥n te ofrece una breve descripci√≥n de qu√© es cURL y c√≥mo usarlo para interactuar con las API (REST). La definici√≥n tomada de <a href="https://en.wikipedia.org/wiki/CURL">Wikipedia</a> dice: "cURL [...] es un proyecto de software inform√°tico que proporciona una biblioteca y una herramienta de l√≠nea de comandos para transferir datos usando varios protocolos". Dado que REST es una arquitectura que utiliza HTTP, un servidor que expone una API RESTful puede se consumir√° con cURL, porque HTTP es uno de los varios protocolos.</p>
<p>Primero, instal√©moslo en la l√≠nea de comandos. Por ahora, la gu√≠a de instalaci√≥n es para usuarios de MacOS y Ubuntu, pero creo que al buscar "curl para windows" en l√≠nea encontrar√°s una gu√≠a de configuraci√≥n. En esta gu√≠a, utilizaremos Homebrew para instalarlo en MacOS. Si no tienes Homebrew, inst√°telo con el siguiente comando en la l√≠nea de comandos:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span>/usr/bin/ruby -e <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="token variable">)</span></span>"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>A continuaci√≥n, instale cURL con Homebrew:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span>brew <span class="token function">install</span> <span class="token function">curl</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Para Ubuntu:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">curl</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Ahora, inicia el servidor Express que realizamos en las partes anteriores. Una vez que inicies tu aplicaci√≥n, ejecuta curl <code class="language-text">http://localhost:3000</code> en otra pesta√±a de la l√≠nea de comandos. Aseg√∫rate de que el puerto coincida con tu puerto y que el servidor Express se est√© ejecutando. Despu√©s de ejecutar el comando, deber√≠as ver "¬°Hola Mundo!" impreso en la l√≠nea de comandos. Enhorabuena, acabas de consumir tu servidor Express como cliente con algo m√°s que un navegador.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token function">Navegador</span> <span class="token punctuation">(</span>Cliente<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Servidor Express
Herramienta de l√≠nea de <span class="token function">comandos</span> <span class="token punctuation">(</span>Cliente con cURL<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Servidor Express</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>Si accedes a tu aplicaci√≥n Express en <code class="language-text">http://localhost:3000</code> en el navegador o a trav√©s de la l√≠nea de comandos con cURL, deber√≠a ver el mismo resultado. Ambas herramientas act√∫an como clientes, mientras que la aplicaci√≥n Express es su servidor. En las siguientes secciones veremos c√≥mo usar cURL para verificar la API REST de la aplicaci√≥n Express, que implementaremos en conjunto, en la l√≠nea de comandos en lugar de en el navegador.</p>
<h2 id="rutas-express-m√©todos-http-y-operaciones-rest" style="position:relative;"><a href="#rutas-express-m%C3%A9todos-http-y-operaciones-rest" aria-label="rutas express m√©todos http y operaciones rest permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rutas Express: M√©todos HTTP y Operaciones REST</h2>
<p>Express es una opci√≥n perfecta para un servidor cuando se trata de crear y exponer APIs (por ejemplo, API REST, API GraphQL) para comunicarse como cliente con su aplicaci√≥n de servidor. <a href="/configurar-express-en-node">Anteriormente</a>, ya hab√≠a implementado una ruta Express, que env√≠a un "¬°Hola mundo!", al que ha accedido a trav√©s del navegador y cURL en la l√≠nea de comandos. Configuraremos m√°s rutas para acomodar una API RESTful para la aplicaci√≥n Express eventualmente. Agrega las siguientes rutas a tu aplicaci√≥n Express, mientras que el URI en s√≠ no cambia, pero el m√©todo utilizado s√≠:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">'dotenv/config'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Recibi√≥ un m√©todo GET'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Recibi√≥ un m√©todo POST'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Recibi√≥ un m√©todo PUT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Recibi√≥ un m√©todo DELETE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">¬°Aplicaci√≥n de ejemplo escuchando en el puerto </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ahora inicia nuevamente el servidor Express en la l√≠nea de comandos, si a√∫n no se est√° ejecutando, y ejecuta cuatro comandos cURL en otra pesta√±a de la l√≠nea de comandos. Deber√≠a ver el siguiente resultado:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span><span class="token function">curl</span> http://localhost:3000
-<span class="token operator">></span> Recibi√≥ un m√©todo GET

<span class="token function">curl</span> -X POST http://localhost:3000
-<span class="token operator">></span> Recibi√≥ un m√©todo POST

<span class="token function">curl</span> -X PUT http://localhost:3000
-<span class="token operator">></span> Recibi√≥ un m√©todo PUT

<span class="token function">curl</span> -X DELETE http://localhost:3000
-<span class="token operator">></span> Recibi√≥ un m√©todo DELETE</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Por defecto cURL usar√° un m√©todo HTTP GET. Sin embargo, puedes especificar el m√©todo HTTP con el indicador <code class="language-text">-X</code> (o el indicador <code class="language-text">--request</code>). Dependiendo del m√©todo HTTP que elijas, acceder√° a diferentes rutas de la aplicaci√≥n Express, que hasta ahora representan solo un √∫nico endpoint de la API con un URI hasta el momento. M√°s adelante ver√°s otras adiciones que puedes agregar a tus solicitudes de cURL.</p>
<p>Ese es uno de los aspectos clave de REST: utiliza m√©todos HTTP para realizar operaciones en URI(s). A menudo, estas operaciones se denominan <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">operaciones CRUD</a> para crear, leer, actualizar y eliminar operaciones. A continuaci√≥n, veremos qu√© estas operaciones se utilizan en las URIs (recursos).</p>
<h2 id="rutas-express-uris-y-recursos" style="position:relative;"><a href="#rutas-express-uris-y-recursos" aria-label="rutas express uris y recursos permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rutas Express: URIs y recursos</h2>
<p>Otro aspecto importante de REST es que cada URI act√∫a como un recurso. Hasta ahora, solo hemos operado en la URI ra√≠z con las operaciones CRUD. Realmente no representa un recurso en REST. En contraste, un recurso podr√≠a ser un recurso de usuario, por ejemplo:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo GET en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo POST en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo PUT en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo DELETE en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Con cURL en la l√≠nea de comandos, puede recorrer el recurso representado por una URI con diferentes operaciones utilizando nuevamente el endpoint de la API <code class="language-text">http://localhost:3000/users</code>. Ver√°s un resultado similar al anterior, pero esta vez est√° operando en un recurso llamado usuario. Falta una pieza para que el m√©todo HTTP PUT (operaci√≥n de actualizaci√≥n) y el m√©todo HTTP DELETE (operaci√≥n de eliminaci√≥n) sean RESTful desde el punto de vista de una URI:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo GET en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'M√©todo POST en el recurso usuario'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/users/:userId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M√©todo PUT en el recurso usuario/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/users/:userId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M√©todo DELETE en el recurso usuario/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Para eliminar o actualizar un recurso de usuario, debe conocer al usuario exacto. Ah√≠ es donde se utilizan identificadores √∫nicos en la programaci√≥n. En nuestras rutas Express, podemos asignar identificadores √∫nicos con par√°metros en la URI. Luego, la funci√≥n de devoluci√≥n de llamada mantiene el par√°metro en los par√°metros del objeto de solicitud. Intenta de nuevo una operaci√≥n cURL en <code class="language-text">/users/1</code>, <code class="language-text">/users/2</code> u otro identificador con un m√©todo HTTP DELETE o UPDATE y verifica que el identificador aparezca en la l√≠nea de comandos como salida.</p>
<h2 id="darle-sentido-a-rest" style="position:relative;"><a href="#darle-sentido-a-rest" aria-label="darle sentido a rest permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Darle sentido a REST</h2>
<p>Es posible que a√∫n te est√©s preguntando: <em>¬øQu√© valor trae la combinaci√≥n de URI y m√©todos HTTP, que constituyen la mayor√≠a de la filosof√≠a REST, a mi aplicaci√≥n?</em></p>
<p>Imaginemos que no solo devolveremos un resultado, como lo hacemos en este momento, sino que actuar√≠amos correctamente en la operaci√≥n recibida en su lugar. Por ejemplo, el servidor Express podr√≠a estar conectado a una base de datos que almacena las entidades de los usuarios en una tabla de usuarios. Ahora, cuando consume el API REST como cliente (por ejemplo, cURL, navegador o tambi√©n una aplicaci√≥n React.js), puede recuperar todos los usuarios de la base de datos con un m√©todo HTTP GET en el URI de <code class="language-text">/users</code> o, en el mismo recurso, crear un nuevo usuario con un m√©todo HTTP POST.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span>// Making sense of the Naming

M√©todo de la ruta Express <span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">></span> M√©todo HTTP <span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">></span> Operaci√≥n REST
Camino de la ruta Express <span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">></span> URI <span class="token operator">&lt;</span><span class="token operator">=</span><span class="token operator">></span> Recurso REST</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>De repente, podr√°s leer y escribir datos desde y hacia una base de datos desde una aplicaci√≥n cliente. Todo lo que lo hace posible es una aplicaci√≥n de back-end que le permite escribir una interfaz (por ejemplo, API REST) ‚Äã‚Äãpara las operaciones CRUD.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span>Cliente -<span class="token operator">></span> API REST -<span class="token operator">></span> Servidor -<span class="token operator">></span> Base de Datos</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Mientras que es importante notar que la API REST pertenece a la aplicaci√≥n del servidor. Puede llevar esto siempre un paso m√°s all√° al tener varias aplicaciones de servidor que ofrecen API REST. A menudo, vienen con el nombre de microservicios o servicios web, mientras que cada aplicaci√≥n de servidor ofrece una funcionalidad bien encapsulada. Los servidores ni siquiera tienen que usar el mismo lenguaje de programaci√≥n, ya que se est√°n comunicando a trav√©s de una interfaz independiente del lenguaje de programaci√≥n. Adem√°s, las interfaces (API) no tienen que ser necesariamente API REST.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span>       -<span class="token operator">></span> API REST -<span class="token operator">></span> Servidor -<span class="token operator">></span> API GraphQL -<span class="token operator">></span> Servidor -<span class="token operator">></span> Base de Datos
Cliente
       -<span class="token operator">></span> API REST -<span class="token operator">></span> Servidor -<span class="token operator">></span> Base de Datos</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>Vamos a llevar todo lo que aprendimos en teor√≠a, hasta ahora, un paso m√°s hacia una aplicaci√≥n real mediante el env√≠o de datos reales a trav√©s del cable. Los datos ser√°n datos de muestra, que a√∫n no provendr√°n de una base de datos, sino que estar√°n codificados en el c√≥digo fuente en su lugar:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> <span class="token string">'Claudia Valdivieso'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> <span class="token string">'Carlos Z√°rate'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">'Hola Mundo'</span><span class="token punctuation">,</span>
    userId<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">'Por el Mundo'</span><span class="token punctuation">,</span>
    userId<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Junto a las entidades de usuario, tendremos entidades de mensaje tambi√©n. Ambas entidades est√°n relacionadas entre s√≠ al proporcionar la informaci√≥n necesaria como identificadores (por ejemplo, un mensaje tiene un creador del mensaje). As√≠ es como un mensaje se asocia con un usuario y c√≥mo usted tambi√©n recuperar√≠a los datos de una base de datos, mientras que cada entidad (usuario, mensaje) tiene una tabla de base de datos dedicada. Ambos se representan como objetos a los que se puede acceder mediante identificadores.</p>
<p>Comencemos por proporcionar dos rutas para leer la lista completa de usuarios y un solo usuario por identificador:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users/:userId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">¬°Aplicaci√≥n de ejemplo escuchando en el puerto </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Mientras que seleccionamos un usuario del objeto por identificador para la ruta de usuarios individuales, transformamos el objeto de usuario en una lista de usuarios para la ruta de todos los usuarios. Lo mismo deber√≠a ser posible para el recurso de mensaje:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/messages/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>messages<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">¬°Aplicaci√≥n de ejemplo escuchando en el puerto </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Pruebe las cuatro rutas con cURL en la l√≠nea de comandos. S√≥lo se trata de leer datos. A continuaci√≥n, analizaremos las otras operaciones de CRUD para crear, actualizar y eliminar recursos para escribir datos en realidad. Sin embargo, no podremos evitar un middleware Express personalizado y un middleware Express proporcionado por el ecosistema. Es por eso que discutiremos el tema del middleware Express a continuaci√≥n mientras implementamos las operaciones CRUD que faltan.</p>
<h2 id="express-middleware" style="position:relative;"><a href="#express-middleware" aria-label="express middleware permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Express Middleware</h2>
<p>Veamos c√≥mo se puede implementar un escenario para crear un mensaje en nuestra aplicaci√≥n Express. Ya que estamos creando un mensaje sin una base de datos, necesitamos una biblioteca auxiliar para generar identificadores √∫nicos para nosotros. Instale esta biblioteca auxiliar desde la l√≠nea de comandos:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span><span class="token function">npm</span> <span class="token function">install</span> uuid</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Luego, imp√≥rtelo en la parte superior de su archivo <code class="language-text">src/index.js</code>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> uuidv4 <span class="token keyword">from</span> <span class="token string">'uuid/v4'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Ahora, cree un mensaje con una nueva ruta que use un m√©todo HTTP POST:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  messages<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Generamos un identificador √∫nico para el mensaje con la nueva biblioteca, lo usamos como propiedad en un objeto de mensaje, asignamos el mensaje por identificador en el objeto de mensajes, que es nuestra pseudo base de datos, y devolvemos el nuevo mensaje despu√©s de que se haya creado.</p>
<p>Sin embargo, falta algo para el mensaje. Para crear un mensaje, un cliente debe proporcionar la cadena de texto para el mensaje. Afortunadamente, un m√©todo HTTP POST permite enviar datos como carga √∫til en un cuerpo. Es por eso que podemos usar la solicitud entrante (<code class="language-text">req</code>) para extraer una carga √∫til de la misma.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    text<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  messages<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Sin embargo, el acceso directo a la carga √∫til de una solicitud HTTP POST de esta manera no lo proporciona Express fuera de la caja. O bien, tendr√≠a que transformar la carga √∫til del cuerpo usted mismo o utilizar un middleware dedicado para que esta transformaci√≥n se realice por usted. Instale y use un middleware conocido para este prop√≥sito:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span><span class="token function">npm</span> <span class="token function">install</span> body-parser</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>A continuaci√≥n, √∫selo para su aplicaci√≥n Express como middleware:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>
<span class="token keyword">import</span> bodyParser <span class="token keyword">from</span> <span class="token string">'body-parser'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> extended<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>El body-parser extrae toda la parte del cuerpo de un flujo de solicitud entrante y lo hace accesible en <code class="language-text">req.body</code> (<a href="https://www.quora.com/What-exactly-does-body-parser-do-with-express-js-and-why-do-I-need-it">Fuente</a>):</p>
<ul>
<li>bodyParser.json(): analiza el texto como JSON y expone el objeto resultante en <code class="language-text">req.body</code>.</li>
<li>bodyParser.urlencoded(): analiza el texto como datos codificados en la URL (que es la forma en que los navegadores tienden a enviar datos de formularios de los formularios normales establecidos a POST) y expone el objeto resultante (que contiene las claves y los valores) en <code class="language-text">req.body</code>.</li>
</ul>
<p>Ahora se puede acceder al cuerpo con el texto del mensaje en la solicitud si se env√≠a mediante una solicitud POST normal o una solicitud POST desde un formulario HTML. Ambas formas deber√≠an funcionar ahora. Todos los datos se deben recibir y enviar como carga JSON ahora. Ese es otro aspecto de REST, que en s√≠ mismo no tiene un formati est√°ndar para la carga √∫til (JSON, XML), pero una vez que hayas elegido un formato, debe atenerse a √©l para la API completa.</p>
<p>En los √∫ltimos pasos, hemos instalado un nuevo middleware para Express y lo hemos puesto a disposici√≥n en un nivel de aplicaci√≥n. Cada solicitud que llega a una de nuestras rutas Express pasa por el middleware. Por lo tanto, todos los datos enviados por un cliente a nuestro servidor est√°n disponibles en la solicitud entrante. Int√©ntalo creando un mensaje t√∫ mism@. En una solicitud de cURL puede especificar encabezados HTTP con el indicador <code class="language-text">-H</code>, es decir, como decimos que queremos transferir JSON, y los datos como carga √∫til con el indicador <code class="language-text">-d</code>. Deber√≠as poder crear mensajes de esta manera:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span><span class="token function">curl</span> -X POST -H <span class="token string">"Content-Type:application/json"</span> http://localhost:3000/messages -d <span class="token string">'{"text":"Hola de nuevo, Mundo"}'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>Hasta ahora, solo hemos importado middleware de terceros y lo hemos utilizado en un nivel de aplicaci√≥n. Ahora, construyamos un middleware Express personalizado, que se utiliza en un nivel de aplicaci√≥n, nosotros mismos. El modelo para un middleware es similar a las funciones Express que hemos visto antes:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// hacer algo</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>La funci√≥n <code class="language-text">next()</code>, que est√° disponible como tercer argumento, se llama para indicar que el middleware ha finalizado su trabajo. Esto se vuelve m√°s importante cuando su middleware utiliza funciones as√≠ncronas. En medio de la funci√≥n de middleware puedes hacer cualquier cosa ahora. Podr√≠amos simplemente realizar un <code class="language-text">console.log()</code> de la hora o hacer algo con la solicitud (<code class="language-text">req</code>) o la respuesta (<code class="language-text">res</code>). En nuestro caso, para crear un mensaje, necesitamos saber de alguna manera qui√©n est√° creando el mensaje. Hagamos una versi√≥n simple de un middleware que determine a un pseudo usuario "autenticado" que env√≠a la solicitud. Entonces es posible agregar a este usuario como creador de mensajes al mensaje:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>me <span class="token operator">=</span> users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    text<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
    userId<span class="token operator">:</span> req<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  messages<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>De repente tendremos acceso al usuario <code class="language-text">me</code> en el objeto de solicitud, que es el usuario autenticado, en nuestras rutas. Este usuario puede ser usado luego para ser asignado como creador del mensaje. Se puede imaginar c√≥mo ese middleware podr√≠a usarse m√°s adelante para interceptar cada solicitud entrante para determinar a partir de los encabezados HTTP entrantes si la solicitud proviene de un usuario autenticado o no. Si la solicitud proviene de un usuario autenticado, el usuario se propaga a todas las rutas Express que se utilizar√°n all√≠. As√≠ es como el servidor Express puede ser sin estado, mientras que un cliente siempre env√≠a la informaci√≥n del usuario autenticado actualmente.</p>
<p>Ser sin estado (stateless) es otra caracter√≠stica de los servicios REST. Despu√©s de todo, deber√≠a ser posible crear m√∫ltiples instancias de servidor para equilibrar el tr√°fico entrante de manera uniforme entre los servidores. Si escuch√≥ sobre el t√©rmino balanceador de carga anteriormente, eso es exactamente lo que se usa cuando tiene varios servidores a su disposici√≥n. Es por eso que un servidor no puede mantener el estado (por ejemplo, un usuario autenticado) y el cliente siempre tiene que enviar esta informaci√≥n junto con cada solicitud. Luego, un servidor puede tener un middleware que se encarga de la autenticaci√≥n en un nivel de aplicaci√≥n y proporciona el estado de la sesi√≥n (por ejemplo, un usuario autenticado) a cada ruta en su aplicaci√≥n Express.</p>
<p>Ahora que hemos aprendido lo esencial sobre el middleware de nivel de aplicaci√≥n en Express, implementemos las √∫ltimas rutas para completar las rutas de nuestra aplicaci√≥n. ¬øQu√© pasa con la operaci√≥n para eliminar un mensaje:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/messages/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token operator">:</span> message<span class="token punctuation">,</span>
    <span class="token operator">...</span>otherMessages
  <span class="token punctuation">}</span> <span class="token operator">=</span> messages<span class="token punctuation">;</span>

  messages <span class="token operator">=</span> otherMessages<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Puedes probarlo con el siguiente comando cURL:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span></span><span class="token function">curl</span> -X DELETE http://localhost:3000/messages/1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>La operaci√≥n de actualizaci√≥n en un recurso de mensaje es para que lo implementes como un ejercicio. Lo dejar√© para una secci√≥n posterior, porque r√°pidamente plantea un nuevo tema: los permisos. La pregunta: ¬øQui√©n puede editar un mensaje? Solo deber√≠a ser posible para el usuario autenticado (<code class="language-text">me</code>) que es el creador del mensaje, ¬øverdad?</p>
<p>Por √∫ltimo, como ya tienes a tu disposici√≥n el pseudo usuario autenticado debido al middleware de toda la aplicaci√≥n, tambi√©n puede ofrecer una ruta dedicada para este recurso:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/session'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Es la primera vez que rompe las reglas de ser completamente REST, porque se ofrece un endpoint de API para una caracter√≠stica muy espec√≠fica. No ser√° la primera vez que infrinja las leyes de REST, porque la mayor√≠a de las veces REST no se implementa por completo, sino RESTish. Si quieres profundizar m√°s en REST, hazlo!.</p>
<h2 id="modelos-modulares-en-express-como-fuentes-de-datos" style="position:relative;"><a href="#modelos-modulares-en-express-como-fuentes-de-datos" aria-label="modelos modulares en express como fuentes de datos permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modelos modulares en Express como fuentes de datos</h2>
<p>En este momento, toda nuestra implementaci√≥n se encuentra en el archivo <code class="language-text">src/index.js</code>. Sin embargo, en alg√∫n momento es posible que desees modularizar los detalles de su implementaci√≥n y colocarlos en archivos y carpetas dedicados, mientras que el archivo <code class="language-text">src/index.js</code> solo debe preocuparse de poner todo junto e iniciar la aplicaci√≥n. Antes de sumergirnos en modularizar el enrutamiento, veamos c√≥mo podemos modularizar nuestros datos de muestra primero en los llamados modelos. Desde su carpeta <code class="language-text">src</code> escriba los siguientes comandos para crear una estructura de carpeta/archivo para los modelos.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="command-line-prompt"><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span><span data-user=root data-host=localhost></span></span><span class="token function">mkdir</span> models
<span class="token builtin class-name">cd</span> models
<span class="token function">touch</span> index.js</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>La carpeta modelos en una aplicaci√≥n Express suele ser el lugar donde define sus fuentes de datos. En nuestro caso, son los datos de muestra, pero en otras aplicaciones, por ejemplo, ser√≠an las interfaces a la base de datos. En nuestro caso de refactorizaci√≥n, movamos nuestros datos de muestra al nuevo archivo <code class="language-text">src/models/index.js</code>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> <span class="token string">'Claudia Valdivieso'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> <span class="token string">'Carlos Z√°rate'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">'Hola Mundo'</span><span class="token punctuation">,</span>
    userId<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
    text<span class="token operator">:</span> <span class="token string">'Por el Mundo'</span><span class="token punctuation">,</span>
    userId<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  users<span class="token punctuation">,</span>
  messages<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Elimine los datos de muestra posteriormente en el archivo <code class="language-text">src/index.js</code>. Tambi√©n importe los modelos en el archivo<code class="language-text">src/index.js</code> ahora y p√°selos en nuestro middleware personalizado de nivel de aplicaci√≥n a todas las rutas a trav√©s de un objeto de contexto dedicado. Ah√≠ es donde el usuario <code class="language-text">me</code> (autenticado) puede colocarse tambi√©n. No necesita necesariamente el objeto de contexto como contenedor, pero me pareci√≥ una buena pr√°ctica mantener todo lo que se pasa a las rutas en un solo lugar.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

<span class="token keyword">import</span> models <span class="token keyword">from</span> <span class="token string">'./models'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token punctuation">{</span>
    models<span class="token punctuation">,</span>
    me<span class="token operator">:</span> models<span class="token punctuation">.</span>users<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Luego, en lugar de tener acceso a los datos de muestra en todas las rutas desde variables externas como antes, lo cual es un efecto secundario innecesario y no mantiene la funci√≥n pura, queremos usar los modelos (y el usuario autenticado) desde los argumentos de la funci√≥n ahora.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/session'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/users/:userId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/messages/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    text<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
    userId<span class="token operator">:</span> req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/messages/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token operator">:</span> message<span class="token punctuation">,</span>
    <span class="token operator">...</span>otherMessages
  <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">;</span>

  req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages <span class="token operator">=</span> otherMessages<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Estamos utilizando el middleware de toda la aplicaci√≥n para pasar los modelos a todas nuestras rutas en un objeto de contexto. Los modelos viven fuera del archivo <code class="language-text">src/index.js</code> y pueden ser refactorizados a las interfaces reales de la base de datos. A continuaci√≥n, dado que hicimos que el enrutamiento fuera independiente de todos los efectos secundarios y pas√°ramos todo lo necesario a trav√©s del objeto de solicitud con el objeto de contexto, tambi√©n podemos mover las rutas a lugares separados.</p>
<h2 id="enrutamiento-modular-con-express-router" style="position:relative;"><a href="#enrutamiento-modular-con-express-router" aria-label="enrutamiento modular con express router permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enrutamiento modular con Express Router</h2>
<p>Hasta ahora, hemos montado rutas directamente en la instancia de la aplicaci√≥n Express en el archivo <code class="language-text">src/index.js</code>. Esto se volver√° prolijo con el tiempo, ya que este archivo solo debe preocuparse por todos los temas importantes para iniciar nuestra aplicaci√≥n. No debe revelar detalles de implementaci√≥n de las rutas. Ahora la mejor pr√°ctica ser√≠a mover las rutas a una estructura de carpetas/archivos dedicados. Es por eso que queremos darle a cada recurso REST su propio archivo en una carpeta dedicada. Desde su carpeta <code class="language-text">src/</code>, escriba lo siguiente en la l√≠nea de comandos para crear una estructura de carpeta/archivo para las rutas modulares:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">...</span>

<span class="token keyword">import</span> routes <span class="token keyword">from</span> <span class="token string">'./routes'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/session'</span><span class="token punctuation">,</span> routes<span class="token punctuation">.</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> routes<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/messages'</span><span class="token punctuation">,</span> routes<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>En nuestro archivo de entrada <code class="language-text">src/route/index.js</code> al m√≥dulo de rutas, importe todas las rutas desde sus archivos dedicados (que a√∫n no est√°n definidos) y exp√≥rtelos como un objeto. Despu√©s, est√°n disponibles en el archivo <code class="language-text">src/index.js</code> como ya los hemos usado.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> session <span class="token keyword">from</span> <span class="token string">'./session'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./user'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> message <span class="token keyword">from</span> <span class="token string">'./message'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  session<span class="token punctuation">,</span>
  user<span class="token punctuation">,</span>
  message<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ahora implementemos cada ruta modular. Comience con la ruta de la sesi√≥n en el archivo <code class="language-text">src/route/session.js</code> que solo devuelve el pseudo usuario autentificado. Express ofrece Express Router para crear dichas rutas modulares sin montarlas directamente en la instancia de la aplicaci√≥n Express. As√≠ es como podemos crear rutas modulares en otros lugares que no sean la aplicaci√≥n Express, pero importarlos m√°s tarde para que se monten en la instancia de la aplicaci√≥n Express como ya lo hemos hecho en un paso anterior.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>A continuaci√≥n, la ruta user en el archivo <code class="language-text">src/route/user.js</code>. Es bastante similar a la ruta de la sesi√≥n:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/:userId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>users<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Observe que no necesitamos definir la URI <code class="language-text">/users</code> (ruta) sino solo las subrutas, porque ya lo hicimos en el proceso de montaje de la ruta en la aplicaci√≥n Express (checa el archivo <code class="language-text">src/index.js</code>). A continuaci√≥n, implemente el archivo <code class="language-text">src/route/message.js</code> para definir la √∫ltima de nuestras rutas modulares:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> uuidv4 <span class="token keyword">from</span> <span class="token string">'uuid/v4'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span>
    text<span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
    userId<span class="token operator">:</span> req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>me<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> message<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/:messageId'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>messageId<span class="token punctuation">]</span><span class="token operator">:</span> message<span class="token punctuation">,</span>
    <span class="token operator">...</span>otherMessages
  <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages<span class="token punctuation">;</span>

  req<span class="token punctuation">.</span>context<span class="token punctuation">.</span>models<span class="token punctuation">.</span>messages <span class="token operator">=</span> otherMessages<span class="token punctuation">;</span>

  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ahora cada una de nuestras rutas modulares desde Express Router est√° montada en nuestra aplicaci√≥n Express con una URI dedicada en el archivo <code class="language-text">src/index.js</code>. Las rutas modulares en la carpeta <code class="language-text">src/route</code> solo se ocupan de las rutas secundarias y los detalles de implementaci√≥n, mientras que el archivo <code class="language-text">src/index.js</code> se ocupa de la ruta principal y la ruta modular que se usa all√≠. Al final, no olvides eliminar todas las rutas utilizadas anteriormente del archivo <code class="language-text">src/index.js</code> que movimos a la carpeta <code class="language-text">src/route/</code>.</p>
<h3 id="recursos-relacionados" style="position:relative;"><a href="#recursos-relacionados" aria-label="recursos relacionados permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recursos relacionados</h3>
<p><a href="https://www.toptal.com/express-js/nodejs-typescript-rest-api-pt-1">Building a Node.js/TypeScript REST API, Part 1: Express.js</a> es un tutorial (en ingl√©s) para aquellos que desean usar TypeScript y en √©l usa un paquete interesante llamado <code class="language-text">winston</code> que es responsable de registrar (log) las peticiones a nuestra API y las respuestas (y errores) devueltas üëå.</p>
<blockquote>
<p>Este tutorial es la parte 3 de 3 en esta serie.<br>
Parte 1: <a href="/node-con-babel">Configuraci√≥n m√≠nima de Node.js con Babel</a><br>
Parte 2: <a href="/configurar-express-en-node">¬øC√≥mo configurar Express.js en Node.js?</a></p>
</blockquote></div></article><nav class="flex container suggested"><a rel="prev" href="/configurar-express-en-node/"><span>Previous</span>¬øC√≥mo configurar Express.js en Node.js?</a><a rel="next" href="/amor-al-maximo/"><span>Next</span>Amor al m√°ximo</a></nav><div id="comments"><h2>Comment or let&#x27;s<!-- --> <a href="https://twitter.com/search?q=https%3A%2F%2Flavaldi.com%2Fcomo-crear-api-rest-express-node" target="_blank" rel="noopener noreferrer">discuss on Twitter</a></h2><div id="disqus_thread"></div></div></div></main><footer class="footer flex"><section class="container"><nav class="footer-links"><a href="/code">Code</a><a href="/jesus-freak">Jesus Freak</a><a href="https://twitter.com/lavaldi" target="_blank" rel="noopener noreferrer">Twitter</a><a href="/rss.xml">RSS</a></nav><nav class="flex justify-center">With ‚ù§Ô∏è</nav></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/como-crear-api-rest-express-node/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-45fddcf92469487f73e5.js"],"app":["/app-baf706b2ada598d8c037.js"],"component---src-pages-404-js":["/component---src-pages-404-js-61935eca49a78e2783b2.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-92c1d736e2828436a4bd.js"],"component---src-pages-code-js":["/component---src-pages-code-js-dd6f5bb7d00e66be1df6.js"],"component---src-pages-index-js":["/component---src-pages-index-js-49dd92671b7932220361.js"],"component---src-pages-jesus-freak-js":["/component---src-pages-jesus-freak-js-6b1d69c7057dcbe63b17.js"],"component---src-templates-page-js":["/component---src-templates-page-js-685eee805fbda700faed.js"],"component---src-templates-post-js":["/component---src-templates-post-js-55788cc5a7679ffc507c.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-749a7ddfe9644a3fd79b.js"]};/*]]>*/</script><script src="/polyfill-45fddcf92469487f73e5.js" nomodule=""></script><script src="/component---src-templates-post-js-55788cc5a7679ffc507c.js" async=""></script><script src="/commons-a34cae212a974f2cf94b.js" async=""></script><script src="/styles-c2fe8482057191dca484.js" async=""></script><script src="/app-baf706b2ada598d8c037.js" async=""></script><script src="/framework-376edee25eb5f5cd8260.js" async=""></script><script src="/webpack-runtime-e6b619f2a5cdb26635b7.js" async=""></script></body></html>